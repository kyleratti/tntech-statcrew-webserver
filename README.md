# tscw-daemon

- [tscw-daemon](#tscw-daemon)
- [Purpose](#purpose)
- [Solution](#solution)
- [Environment Variables](#environment-variables)

Webserver to serve `.xml` files generated by statcrew for Tennessee Tech University's sports program

# Purpose

This application was built to as a solution for legacy software at Tennessee Tech University's sports program called Statcrew. The Statcrew software is very old, does not have vendor support (at least with TTU), and often running on a virtual 32-bit Windows machine on a separate network from the rest of the sports program.

My understanding of the Statcrew software was that one member of the department would enter information into it, the software generates a `.xml` file with stats for each player in the game, and another piece of software on the video board reads the stats. The problem became that the Statcrew software was running on a separate network with no routing, and frequently in another building, and IT was unable to remedy this in time.

# Solution

We came up with a two piece design to solve the separate network issue; a [relay server](https://github.com/kyleratti/tscw-relay) run outside of the school's private network that accepts HTTP requests, and this daemon server which connects to the relay to respond to requests.

Essentially, this application takes a watch/source folder, a list of valid files to serve, and a [tscw-relay](https://github.com/kyleratti/tscw-relay) web socket address. On startup, it connects to the relay server and prepares to serve the files in realtime as HTTP requests are made to the relay server.

# Environment Variables

An example file, `tscw_config_example.txt`, is included. You should rename this to `tscw_config.txt` and place it in the same directory as the executable.

| Variable Name       | Type     | Default Value                                   | Description                                                                   |
| ------------------- | -------- | ----------------------------------------------- | ----------------------------------------------------------------------------- |
| `TSCW_WATCH_FOLDER` | `String` | `null`                                          | The folder to watch for files in                                              |
| `TSCW_VALID_FILES`  | `String` | `bsb.xml,fb.xml,mbb.xml,sb.xml,soc.xml,wbb.xml` | A comma (`,`) separated list of valid file names to serve over the web server |
| `TSCW_RELAY_SERVER` | `String` | `null`                                          | The relay server address (including `ws://` at the beginning)                 |
